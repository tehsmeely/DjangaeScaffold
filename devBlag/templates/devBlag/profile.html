{% extends 'devBlag/base.html' %}

{% load staticfiles %}

{% block headerInsert %}
	
	<title>DevBlag - Profile</title>

	<style>
		.userInfo
		{
			background-color: #eee;
			-webkit-border-radius: 7px;
			-moz-border-radius: 7px;
			border-radius: 7px;
			border: solid black 1px;
			width: 50%;
			text-align: center;
		}

		.editButton
		{
			cursor: pointer;
			opacity: 0.5;
		}
		.editButton:hover
		{
			opacity: 1;
		}

		.devSection
		{
			text-align: center;
		}

		.postHeader
		{
			width: 80%;
			margin-left: auto;
			margin-right: auto;
			overflow: hidden;
			position: relative;
			-webkit-border-radius: 7px;
			-moz-border-radius: 7px;
			border-radius: 7px;
			cursor: pointer;
		}

		.postHeader:hover
		{
			opacity: 0.8;
		}

		p.postTitle
		{
			font-weight: bold;
		}

		p.postDate
		{
			color: #13
			1;
		}


		.horizLine
		{
			width: 100%;
			height: 5px;
			background-color: #eee;
		}

	</style>


	<script>
		$(function(){

			

			// $(".editbutton").click(function(){
			// 	var state = $(this).attr("state");
			// 	var parent = $(this).parent();
			// 	var span = $("span", parent);


			// 	if (state == "0") //Edit state
			// 	{
					
			// 		var original = span.attr("actualVal");
			// 		$(this).switchClass("fa-pencil", "fa-check");
			// 		span.empty();
			// 		span.append("<input type='text' value='" + original + "'>");
			// 		$(this).attr("state", "1");

			// 	} else { //confirm state

			// 		//get value, store that in "actualVal".
			// 		//convert to blank message if blank when
			// 		//displaying in span

			// 		var newVal = $("input", span).val();
			// 		var editButton = $(this);
			// 		var method = span.attr("method")
			// 		console.log(newVal);

					

			// 		//AJAX
			// 		$.get($AJAX_URL_EDIT, {"method" : method,"newVal": newVal}, function(data){
			// 			if (newVal == ""){
			// 				//var spanVal = "(blank - displays as full name)";
			// 				var spanVal = span.attr("blankVal");
			// 			} else {
			// 				var spanVal = newVal;
			// 			} 
			// 			span.html(spanVal);
			// 			span.attr("actualVal", newVal);
			// 			editButton.switchClass("fa-check", "fa-pencil");
			// 			editButton.attr("state", "0");
			// 		});

					

			// 	}
			// })

			$(".postHeader").click(function(){
				window.location = "/post/" + $(this).attr("postID");
			})


		})
	</script>
{% endblock %}


{% block container %}
	<br><br>
	{% if isDeveloper %}<img class="profilePic" src="{% static developer.thumbnail.getServingURLPath %}">{% endif %}
	
	<div class="userInfo">
		<p>First Name: <span id="firstName" actualVal="{{user.first_name}}" blankVal="(blank)" method="updateFirstName" route="updateProfile">
		{% if user.first_name == "" %}(blank){% else %}{{user.first_name}}{% endif %}</span>
		<i class="fa fa-pencil editButton" id="editFirstName" state="0"></i></p>

		<p>Last Name: <span id="lastName" actualVal="{{user.last_name}}"  blankVal="(blank)" method="updateLastName" route="updateProfile">
		{% if user.last_name == "" %}(blank){% else %}{{user.last_name}}{% endif %}</span>
		<i class="fa fa-pencil editButton" id="editLastName" state="0"></i></p></p>

		<p>Email Address: <span>{{user.email}}</span></p>
		<p>Date Joined: {{user.date_joined}}</i></p>
	</div>

	{% if isDeveloper %}

		<p>You are a registered developer on this site</p>
		<p>See your <a href="/developer/{{developer.user.id}}/">developer page</a></p>
		<br>
		<p>Developer Display Name: <span actualVal="{{developer.displayName}}" blankVal="(blank - displays as full name)"  method="updateDisplayName" route="updateProfile">
			{% if developer.displayName == "" %}(blank - displays as full name)
			{% else %} {{developer.displayName}}
			{% endif %}</span> <i class="fa fa-pencil editButton" state="0"></i></p>
		<br><br>

		<div class="horizLine"></div>

		<div class="devSection">
			{% if unpublishedPosts|length > 0 %}
				<h3>Your currently unpublished posts</h3>
				{% for post in unpublishedPosts %}
					<div class="postHeader"postID={{post.id}} style="background-color: {{post.backgroundColour}}">
						<p class="postTitle">{{post.title}}</p>
						<p class="postDate">{{post.createdDate}}</p>
						<!--<a href="/project/{{ post.project.id }}/"><img class="floatProjectImg" src="{{ post.project.image.getServingURLPath }}" width="40" height="40" style="top: 0;"></a>-->
					</div>
				{% endfor %}
			{% endif %}

			<h3>All your Resources</h3>
			<h4>Images</h4>
			{% for resource in Resource_image.mine %}
				<p>{{resource.caption}} {{resource.imageFile.url}}</p>
			{% endfor %}
			<h4>Code</h4>
			{% for resource in Resource_code.mine %}
				<p>{{resource.caption}}</p>
			{% endfor %}
			<h4>Downloads</h4>
			{% for resource in Resource_download.mine %}
				<p>{{resource.caption}} {{resource.resFile.url}}</p>
			{% endfor %}
			<br>
			{% include "devBlag/addResource.html" %}
		</div>
	{% else %}
		<p><a href="/devApply/">Apply to post as a developer on this site</a><p>
	{% endif %}


{% endblock %}